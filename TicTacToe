import tkinter as tk
from tkinter import messagebox


root = tk.Tk()
root.title("Tic-Tac-Toe: Player vs AI")
root.resizable(False, False)


board = [""] * 9
buttons = []
player_symbol = "X"
ai_symbol = "O"
game_over = False


win_conditions = [(0, 1, 2), (0, 3, 6), (0, 4, 8), (3, 4, 5), (6, 7, 8), (1, 4, 7), (2, 5, 8), (2, 4, 6)]


def is_winner(brd, sym):
    return any(brd[a] == brd[b] == brd[c] == sym for a, b, c in win_conditions)


def is_draw(brd):
    return "" not in brd


def minimax(brd, is_ai):
    if is_winner(brd, ai_symbol): return 1
    if is_winner(brd, player_symbol): return -1
    if is_draw(brd): return 0
    moves, scores = [], []


    for i in range(9):
        if brd[i] == "":
            brd[i] = ai_symbol if is_ai else player_symbol
            score = minimax(brd, not is_ai)
            brd[i] = ""
            scores.append(score)
            moves.append(i)
    return moves[scores.index(max(scores))] if is_ai else min(scores)


def get_best_moves():
    best_score = -float('inf')
    move = None
    for i in range(9):
        if board[i] == "":
            board[i] = ai_symbol
            score = minimax(board, False)
            board[i] = ""
            if score > best_score:
                best_score = score
                move = i
    return move


def check_game():
    global game_over
    if is_winner(board, player_symbol):
        status_label.config(text="You Win!")
        messagebox.showinfo("Game Over", "You Win")
        game_over = True
    elif is_winner(board, ai_symbol):
        status_label.config(text="AI wins!")
        messagebox.showinfo("Game Over", "AI wins!")
        game_over = True
    elif is_draw(board):
        status_label.config(text="It's a draw!")
        messagebox.showinfo("Game Over", "It's a draw")
        game_over = True
    if game_over:
        for btn in buttons:
            btn.config(state="disabled")


def ai_move():
    if not game_over:
        move = get_best_moves()
        if move is not None:
            board[move] = ai_symbol
            buttons[move].config(text=ai_symbol, state="disabled")
            check_game()
            if not game_over:
                status_label.config(text="Your Turn (X)")


def on_click(i):
    if board[i] == "" and not game_over:
        board[i] = player_symbol
        buttons[i].config(text=player_symbol, state="disabled")
        check_game()
        if not game_over:
            status_label.config(text="AI is thinking...")
            root.after(300, ai_move) 


def reset_game():
    global board, game_over
    board = [""] * 9
    game_over = False
    for btn in buttons:
        btn.config(text="", state="normal", bg="SystemButtonFace")
    status_label.config(text="Your Turn (X)")


frame = tk.Frame(root)
frame.pack(pady=10)


for i in range(9):
    btn = tk.Button(frame, text="", width=10, height=3, font=("Arial", 16), command=lambda i=i: on_click(i))
    btn.grid(row=i//3, column=i%3, padx=5, pady=5)
    buttons.append(btn)


status_label = tk.Label(root, text="Your Turn (X)", font=("Arial", 14))
status_label.pack(pady=10)


tk.Button(root, text="Reset Game", font=("Arial", 12), command=reset_game).pack(pady=5)
root.mainloop()
